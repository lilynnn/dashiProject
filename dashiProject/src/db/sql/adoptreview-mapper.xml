<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE properties SYSTEM "http://java.sun.com/dtd/properties.dtd">
<properties>

	<entry key="insertThAdoptReviewBoard">	
		INSERT
			  INTO ADOPT_REVIEW
			  (
			    ARLIST_NO
			  , MEM_NO
			  , MEM_ID
			  , NICKNAME
			  , AN_TYPE
			  , AR_TITLE
			  , AR_CONTENT
			  )
			  VALUES
			  (
			    'AR-'||LPAD(SEQ_ARNO.NEXTVAL,3,0)
			  , ?
			  , ?
			  , ?
			  , ?
			  , ?
			  , ?
			  )
	</entry>
	
	<entry key="insertReviewAttachmentList">
		INSERT
		  INTO ATTACHMENT
		  (
		    ATTACH_NO
		  , REF_NO
		  , PATH
		  , ORIGIN_NAME
		  , CHANGE_NAME
		  , ATTACH_LEVEL
		  )
		  VALUES
		  (
		    'AT-'||LPAD(SEQ_ATNO.NEXTVAL,3,0)
		  , 'AR-'||LPAD(SEQ_ARNO.CURRVAL,3,0)
		  , ?
		  , ?
		  , ?
		  , ?
		  )
	</entry>
	
	<entry key="selectReviewList">
		SELECT
		       ARLIST_NO
		     , AN_TYPE
		     , AR_TITLE
		     , VIEW_COUNT
		     , PATH || CHANGE_NAME "TITLEIMG"
		  FROM ADOPT_REVIEW
		  JOIN ATTACHMENT ON(ARLIST_NO = REF_NO)
		 WHERE POST_STATUS = 'Y'
		   AND ATTACH_LEVEL = 1
		 ORDER
		    BY ARLIST_NO DESC
	</entry>
	
	<entry key="increaseCount">
		UPDATE 
		       ADOPT_REVIEW
		   SET VIEW_COUNT = VIEW_COUNT+1
		 WHERE ARLIST_NO = ?
		   AND POST_STATUS = 'Y'
	</entry>
	
	<entry key="selectReview">
		SELECT 
		       ARLIST_NO
		     , MEM_NO
		     , AN_TYPE
		     , AR_TITLE
		     , AR_CONTENT
		     , M.NICKNAME
		     , TO_CHAR(WRITE_DATE, 'YYYY/MM/DD') "WRITE_DATE"
		     , A.MEM_ID
		  FROM ADOPT_REVIEW A
	 	  JOIN MEM_INFO M USING(MEM_NO)
		 WHERE ARLIST_NO = ?
	</entry>
	
	<entry key="selectAttachment">
		SELECT 
		       ATTACH_NO
		     , ORIGIN_NAME
		     , CHANGE_NAME
		     , PATH
		  FROM ATTACHMENT
		 WHERE REF_NO = ?
	</entry>
	
	
	<entry key="selectListCount">
		SELECT
		       COUNT(*) count
		  FROM ADOPT_REVIEW
		 WHERE POST_STATUS = 'Y'
	</entry>
	
	<entry key="selectList">
		SELECT *
		  FROM (
		        SELECT ROWNUM RNUM, C.* 
		          FROM (
		                SELECT
		                       ARLIST_NO
		                     , A.MEM_ID
		                     , A.NICKNAME
                             , AN_TYPE
                             , AR_TITLE
                             , VIEW_COUNT
                             , TO_CHAR(WRITE_DATE,'YYYY-MM-DD') WRITE_DATE
		                  FROM ADOPT_REVIEW A
                          JOIN MEM_INFO USING(MEM_NO)
                         WHERE POST_STATUS = 'Y'
		                 ORDER
		                    BY ARLIST_NO DESC
		                ) C
		        )
		WHERE RNUM BETWEEN ? AND ?
	</entry>
	
	<entry key="selectReplyList">
		SELECT
		       REPLY_NO
		     , MEM_NO
		     , MEM_ID
		     , R.NICKNAME
		     , TO_CHAR(WRITE_DATE, 'YY-MM-DD HH:MI') "WRITE_DATE"
		     , REPLY_CONTENT
		  FROM REPLY R
		  JOIN MEM_INFO USING(MEM_NO)
		 WHERE REPLY_STATUS = 'Y'
		   AND REF_POST_CTG = 2
		   AND CLIST_NO = ?
		 ORDER
		    BY REPLY_NO DESC
	</entry>
	
	<entry key="insertReply">
		INSERT
		  INTO REPLY
		  (
		    REPLY_NO
		  , MEM_NO
		  , REF_POST_CTG
		  , CLIST_NO
		  , NICKNAME
		  , REPLY_CONTENT
		  )
		  VALUES
		  (
		    'REPLY-' || LPAD(SEQ_REPLYNO.NEXTVAL,3,'0')
		  , ?
		  , 2
		  , ?
		  , ?
		  , ?
	  )
	</entry>
	
	<entry key="deleteReply">
		UPDATE
		       REPLY
		   SET REPLY_STATUS = 'D'
		 WHERE REPLY_NO = ?
	</entry>
	
	<entry key="updateReplyForm">
		SELECT
			   REPLY_NO,
		       REPLY_CONTENT
		  FROM REPLY
		 WHERE REPLY_NO = ?
	</entry>
	
	<entry key="updateReply">
		UPDATE
		       REPLY
		   SET REPLY_CONTENT = ?
		     , UPDATE_DATE = SYSDATE
		 WHERE REPLY_NO = ?
	</entry>
	
	<entry key="deleteReview">
		UPDATE
		       ADOPT_REVIEW
		   SET POST_STATUS = 'D'
		 WHERE ARLIST_NO = ?
	</entry>
	
	<entry key="updateReview">
		UPDATE
			   ADOPT_REVIEW
		   SET AN_TYPE = ?
		     , AR_TITLE = ?
		     , AR_CONTENT = ?
		 WHERE ARLIST_NO = ?
	</entry>
	
	<entry key="updateReviewAttachment">
		UPDATE
			   ATTACHMENT
		   SET PATH = ?
		     , ORIGIN_NAME = ?
		     , CHANGE_NAME = ?
		     , ATTACH_LEVEL = ?
		 WHERE ATTACH_NO = ?
	</entry>
	

	
</properties>









