<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE properties SYSTEM "http://java.sun.com/dtd/properties.dtd">
<properties>

	<entry key="selectListCount">
		SELECT
		       COUNT(*) "count"
		  FROM REPORTED
	</entry>

	<entry key="selectReportList">
		SELECT *
		  FROM (
		        SELECT ROWNUM RNUM, A.*
		          FROM (
		                SELECT
		                       REPORT_NO
		                     , CONTENT_NO
		                     , REPLY_NO
		                     , REPORTED_MEM
		                     , MEM_ID
		                     , REPORT_CONTENT
		                     , TO_CHAR(REPORT_DATE, 'YYYY/MM/DD') REPORT_DATE
		                     , REPORT_STATUS
		                     , REPORT_CTG
		                  FROM REPORTED
		                  JOIN MEM_INFO ON (REPORTED_MEM = MEM_NO)
		                 ORDER
		                       BY REPORT_NO DESC) A
		                )
		 WHERE RNUM BETWEEN ? AND ?
	</entry>

	<!-- 검색하기 -->
	<entry key="searchReport">
		SELECT 
		       REPORT_NO
		     , NVL(CONTENT_NO, '-') CONTENT_NO
		     , NVL(REPLY_NO, '-') REPLY_NO
		     , REPORTING_MEM
		     , MEM_ID
		     , REPORT_CONTENT
		     , TO_CHAR(REPORT_DATE, 'YYYY/MM/DD') REPORT_DATE
		     , REPORT_STATUS
		     , REPORT_CTG
		  FROM REPORTED
		  JOIN MEM_INFO ON (REPORTED_MEM = MEM_NO)
		 WHERE TYPE_BR = ?
		   AND REPORT_DATE BETWEEN ? AND SYSDATE
		   AND REPORT_STATUS = ?
	</entry>
	
	<!-- 신고글 삭제 -->
	<entry key="deleteReport">
		UPDATE
		       REPORTED
		   SET REPORT_STATUS = 'Y'
		 WHERE REPORT_NO = ?
	</entry>
	
	<!-- 신고(후기)상세보기 -->
	<entry key="selectReviewReport">
		SELECT
		       REPORT_NO
			 , REPORT_CTG
		     , CONTENT_NO
		     , REPLY_NO
		     , M.MEM_ID "MEM_ID"
		     , REPORT_CONTENT
		     , TO_CHAR(REPORT_DATE, 'YYYY/MM/DD') REPORT_DATE
		     , REPORT_STATUS
		     , AR_TITLE
		     , AR_CONTENT
		  FROM REPORTED R
		  JOIN MEM_INFO M ON (REPORTED_MEM = MEM_NO)
  		  JOIN ADOPT_REVIEW ON (CONTENT_NO = ARLIST_NO)
		 WHERE REPORT_NO = ?
	</entry>
	
	<!-- 신고(실종보호)상세보기 -->
	<entry key="selectDSPReport">
		SELECT
		       REPORT_NO
		     , CONTENT_NO
		     , M.MEM_ID "MEM_ID"
		     , REPORT_CONTENT
		     , TO_CHAR(REPORT_DATE, 'YYYY/MM/DD') REPORT_DATE
		     , REPORT_STATUS
		     , REPORT_CTG
		     , DSP_TITLE
		     , ANIMAL_ISSUE
		     , ETC
		  FROM REPORTED 
		  JOIN MEM_INFO M ON (REPORTED_MEM = M.MEM_NO)
		  JOIN DSP ON (CONTENT_NO = DSP_NO)
		 WHERE REPORT_NO = ?
	</entry>
	
	<!-- 신고(댓글)상세보기 -->
	<entry key="selectReplyReport">
		SELECT
		       REPORT_NO
		     , CONTENT_NO
		     , REPLY_NO
		     , M.MEM_ID "MEM_ID"
		     , REPORT_CONTENT
		     , TO_CHAR(REPORT_DATE, 'YYYY/MM/DD') REPORT_DATE
		     , REPORT_STATUS
		     , REPORT_CTG
		     , AR_TITLE
		     , REPLY_CONTENT
		  FROM REPORTED 
		  JOIN MEM_INFO M ON (REPORTED_MEM = M.MEM_NO)
		  JOIN ADOPT_REVIEW ON (CONTENT_NO = ARLIST_NO)
		  JOIN REPLY R USING (REPLY_NO)
		 WHERE REPORT_NO = ?
	</entry>
	
	<entry key="selectUserReportList">
		SELECT 
		       REPORTED_MEM
		     , MEM_ID
		     , MEM_NAME
		     , BLACKLIST_YN
		     , COUNT(*) count
		 FROM REPORTED
		 JOIN MEM_INFO ON (MEM_NO = REPORTED_MEM)
		WHERE REPORT_STATUS = 'N'
		GROUP 
		      BY 
		       MEM_ID
		     , MEM_NAME
		     , REPORTED_MEM
		     , BLACKLIST_YN
	</entry>











</properties>